{% extends "base.html" %}

{% block title %}Profile - Wrapped{% endblock %}

{% block content %}
    <section>
        <h2>{{ spotify_user_data.profile.display_name }}'s Profile</h2>
        
        <p><strong>Email:</strong>
            {% if spotify_user_data.profile.email %}
                {{ spotify_user_data.profile.email }}
            {% else %}
                No email available
            {% endif %}
        </p>
    </section>

    <hr>

    <!-- Generate Wrapped Section -->
    <section>
        <h3>Generate Wrapped</h3>
        <p>Discover your music trends and generate your personalized Wrapped!</p>
    </section>

    <hr>

    <!-- Past Wraps Section -->
    <section>
        <h3>Past Wraps</h3>
        <p>View your previously generated Wrapped reports:</p>
        <ul>
            {% for wrap in past_wraps %}
                <li>
                    <p>Wrapped for: {{ wrap.timeframe|title }}</p>  <!-- Capitalize timeframe -->
                    <p>Generated on: {{ wrap.generated_on|date:"F j, Y" }}</p>  <!-- Display the generation date -->
                    <a href="{% url 'regenerate_past_wrap' wrap.wrap_id %}" class="btn">Regenerate Wrapped</a>
                </li>
            {% empty %}
                <li>No past wraps available</li>
            {% endfor %}
        </ul>
    </section>
{% endblock %}
